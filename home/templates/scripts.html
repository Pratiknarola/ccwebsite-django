{% load static %}
<!--  Scripts-->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="{% static "Materialize/js/materialize.js" %}"></script>
<script src="{% static "Materialize/js/init.js" %}"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script
  src="http://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
{#Cropper JS files#}
{#<script src="{% static 'js_for_cropper/jquery.min.js' %}"></script>#}
{#<script src="{% static 'js_for_cropper/cropper.min.js' %}"></script>#}
{#<script src="{% static 'js_for_cropper/jquery-cropper.min.js' %}"></script>#}

{#Bootstrap JS files#}
{#<script src="{% static 'Bootstrap/js/bootstrap.min.js' %}"></script>#}
{#<script src="{% static 'Bootstrap/js/bootstrap.js' %}"></script>#}

<script src="{% static 'js/main.js' %}"></script>

<script>M.AutoInit();</script>

{# Function for read more functionality #}
{#                               <a class="btn" onclick="expandPost()">Read more</a>#}
{#                               <script>#}
{#                                    function expandPost() {#}
{#                                        document.getElementById("p").innerHTML = "{{ post.content|safe }}";#}
                                        {#window.alert('hi');#}
{#                                        }#}
{#                                </script>#}
{# Function ended #}


{# Show password #}
<script>
    function showPassword() {
        var x = document.getElementById("password");
        if (x.type === "password") {
            x.type = "text";
        } else {
            x.type = "password";
        }
    }
</script>
{# Show password ended #}



{# AJAX Script#}
{#<script>#}
{#    $(document).on('submit', '.ajax-form', function (e) {#}
{#        e.preventDefault();#}
{##}
{#        $.ajax({#}
{#            type: 'POST',#}
{#            url: '{% url 'Login' %}',#}
{#            data: {#}
{#                username: $('#username_login').val(),#}
{#                password: $('#password_login').val(),#}
{#                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()#}
{#            },#}
{#            success: function () {#}
{#                alert('User logged in');#}
{#            }#}
{#        });#}
{#    });#}
{#</script>#}
{# AJAX Script Ended#}

{#<script>#}
{#$(document).ready(function(){#}
{#    var $myForm = $('#ajax-form');#}
{#    $myForm.submit(function(event){#}
{#        event.preventDefault();#}
{#        var $formData = $(this).serialize();#}
{#        var $thisURL = $myForm.attr('data-url') || window.location.href; // or set your own url#}
{#        $.ajax({#}
{#            method: "POST",#}
{#            url: $thisURL,#}
{#            data: $formData,#}
{#            success: handleFormSuccess,#}
{#            error: handleFormError,#}
{#        })#}
{#    });#}
{##}
{#    function handleFormSuccess(data, textStatus, jqXHR){#}
{#        console.log(data);#}
{#        console.log(textStatus);#}
{#        console.log(jqXHR);#}
{#        $myForm.reset(); // reset form data#}
{#    }#}
{##}
{#    function handleFormError(jqXHR, textStatus, errorThrown){#}
{#        console.log(jqXHR);#}
{#        console.log(textStatus);#}
{#        console.log(errorThrown);#}
{#    }#}
{# });#}
{#</script>#}

{# For like button#}
<script>
    {#$(document).ready(function () {#}

        function updateText(btn, newCount, verb){
            if(verb === 'Like') {
                btn.html(newCount + " <i class='material-icons'>thumb_up</i>");
            } else if (verb === 'Unlike') {
                btn.html(newCount + " <i class='material-icons'>thumb_down</i>");
            }
            {#btn.text(newCount + " " + verb)#}
        }

        $('.like-btn').click(function (event) {
            event.preventDefault();
            alert("Like button is under development and testing phase! \n Tip: Do not refresh page after liking!");

            var this_ = $(this);
            var likeURL = this_.attr('data-href');
            var likeCount = parseInt(this_.attr('data-likes')) | 0;
            var addLike = likeCount + 1; // = 3
            var removeLike = likeCount; // = 1
            if(likeURL){
                $.ajax({
                url: likeURL,
                method: "GET",
                data: {},
                success: function (data) {
                    console.log(data);
                    if (data.liked){
                        //add one like
                        console.log('addLike=', addLike);
                        updateText(this_, addLike, 'Unlike')
                    } else {
                        //remove one like
                        console.log('removeLike=', removeLike);
                        updateText(this_, removeLike, 'Like')
                    }
                },
                error: function (error) {
                    console.log(error);
                    console.log('error')
                }
            });
            }

        });
     {# });#}
</script>

{#For read more/less fadeIn()/fadeOut()#}
<script>
    $(".read-more-btn").click(function (event) {
        event.preventDefault();
        $(this).parent().fadeOut();
        $(this).parent().next('.expanded-content').fadeIn();
    });

    $('.read-less-btn').click(function (event) {
        event.preventDefault();
        $(this).parent().fadeOut();
        $(this).parent().prev('.less-content').fadeIn();
    });
</script>

{#For reply fadeToggle()#}
{#<script>#}
{#    $(".comment-reply-btn").click(function (event) {#}
{#        event.preventDefault();#}
{#        $(this).parent().next(".comment-reply").fadeToggle();#}
{#    });#}
{#</script>#}
{##}
{#For comment fadeToggle()#}
{#<script>#}
{#    $(".comment-display-btn").click(function (event) {#}
{#        event.preventDefault();#}
{#        $(this).parent().parent().next('.comment-display').fadeToggle();#}
{#    });#}
{#</script>#}


{# For Toasts #}
    {% if messages %}
        {% for message in messages %}
            <script>M.toast({html: "{{ message }}", classes: 'rounded', displayLength: 3000})</script>
        {% endfor %}
    {% endif %}

    {% if comment_form.errors %}
        {% for field in comment_form %}
            {% for error in field.errors %}
                <script>M.toast({html: "{{ error }}", classes: 'rounded', displayLength: 3000})</script>
            {% endfor %}
        {% endfor %}
    {% endif %}

    {% if form.errors %}
        {% for field in form %}
            {% for error in field.errors %}
                <script>M.toast({html: "{{ error }}", classes: 'rounded', displayLength: 3000})</script>
            {% endfor %}
        {% endfor %}
    {% endif %}

    {% if password_change_form.errors %}
        {% for field in password_change_form %}
            {% for error in field.errors %}
                <script>M.toast({html: "{{ error }}", classes: 'rounded', displayLength: 3000})</script>
            {% endfor %}
        {% endfor %}
    {% endif %}
{# Function to display toast from HTML (when message can't be passed from view) #}
    <script>
        function addToast(message){
            M.toast({html: message, classes: 'rounded', displayLength: 3000});
        }
    </script>

